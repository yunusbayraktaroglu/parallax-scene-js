(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17255,t=>{"use strict";var e=class{constructor(){this.t=!1,this.i=0,this.h=0,this.o=0,this.l=0,this.u=0,this.m=0}tick(){return this.t||this.p(),this.v()}pause(){this.l=i()}resume(){this.u+=(i()-this.l)/1e3}getTime(){return{elapsedTime:this.o,elapsedPausedTime:this.m}}p(){this.i=i(),this.h=this.i,this.t=!0}v(){let t=i(),e=(t-this.h)/1e3;return this.h=t,this.o+=e,this.m=this.o-this.u,e}};function i(){return performance.now()}var r=class{constructor(t,e,i){this.usedSlots=0,this.P=new Map,this.T=new Map,this.table=new e(t*i),this.stride=t,this.M=i}add(t,e){if(this.isExist(t))return void console.warn(`ID: '${t}' already exist in the table.`);let i=this.D(),r=i*this.stride;for(let[t,i]of Object.entries(e))this.table[r+Number(t)]=i;this.P.set(t,i),this.T.set(i,t),this.usedSlots+=1}remove(t){let e=this.I(t);if(e===this.usedSlots-1)this.T.delete(e);else{let t=this.usedSlots-1,i=this.T.get(t),r=t*this.stride,s=e*this.stride;for(let t=0;t<this.stride;t++)this.table[s+t]=this.table[r+t];this.P.set(i,e),this.T.set(e,i),this.T.delete(t)}this.P.delete(t),this.usedSlots-=1}getData(t,e){let i=this.I(t)*this.stride;return this.table[i+e]}modifyByID(t,e){let i=this.I(t);this.modifyByPosition(i,e)}modifyByPosition(t,e){let i=t*this.stride;for(let[t,r]of Object.entries(e))this.table[i+Number(t)]=r}isExist(t){return this.P.has(t)}I(t){let e=this.P.get(t);if(void 0===e)throw Error(`ID: '${t}' is not found in the table.`);return e}D(){return this.usedSlots===this.M&&this._(),this.usedSlots}_(){let t=2*this.M,e=new this.table.constructor(t*this.stride);e.set(this.table),this.table=e,this.M=t}},s=class{constructor(t){this.A=t,this.S=new Uint8Array(t)}get(){for(let t=0;t<this.S.length;t++)if(!this.S[t])return t;let t=this.A;return this._(),t}consume(t){this.S[t]=1}release(t){this.S[t]=0}_(){let t=2*this.A,e=new Uint8Array(t);e.set(this.S),this.S=e,this.A=t}},n=class{constructor(t,e=20){this.B=new Map,this.O=[],this.k=t,this.$=new s(e),this.j=new r(7,Float32Array,e)}add(t){this.j.isExist(t.id)&&this.remove(t.id,!0);let{elapsedTime:e,elapsedPausedTime:i}=this.k.getTime(),r=this.$.get(),s=t.autoPause?i:e,n=t.duration||0,o=s+(t.delay||0);this.j.add(t.id,{0:r,1:n,2:o,3:o+n,4:+!!t.onRender,5:+!t.autoPause,6:0}),this.B.set(t.id,r),this.$.consume(r),this.O[r]=t}remove(t,e=!1){var i,r;let s=this.B.get(t);void 0!==s?(null==(r=(i=this.O[s]).onEnd)||r.call(i,e),this.C(s)):console.warn(`AnimationID: '${t}' does not exist.`)}tick(){var t,e;let{table:i,usedSlots:r,stride:s}=this.j,{elapsedTime:n,elapsedPausedTime:o}=this.k.getTime();for(let a=0;a<r;a++){let r=a*s,h=1===i[r+5]?n:o,l=i[r+2];if(h<l)continue;let u=i[r+0],c=i[r+1],d=this.O[u];0===i[r+6]&&(i[r+6]=1,null==(t=d.onBegin)||t.call(d)),i[r+4]&&d.onRender(h,l,c),h>i[r+3]&&(null==(e=d.onEnd)||e.call(d,!1),this.C(u))}}C(t){let e=this.O[t].id;this.j.remove(e),this.B.delete(e),this.$.release(t),this.O[t]=void 0}},o=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}lengthSq(){return this.x*this.x+this.y*this.y}clamp(t,e){return this.x=a(this.x,t.x,e.x),this.y=a(this.y,t.y,e.y),this}copy(t){return this.x=t.x,this.y=t.y,this}*[Symbol.iterator](){yield this.x,yield this.y}};function a(t,e,i){return Math.max(e,Math.min(i,t))}function h(){let t=!1;if("maxTouchPoints"in navigator)t=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)t=navigator.msMaxTouchPoints>0;else{let e=matchMedia&&matchMedia("(pointer:coarse)");if(e&&"(pointer:coarse)"===e.media)t=!!e.matches;else if("orientation"in window)t=!0;else{let e=navigator.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(e)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(e)}}return t}t.s(["IDPool",()=>s,"NativeControlTable",()=>r,"PronotronAnimator",()=>n,"PronotronClock",()=>e,"Vector2",()=>o,"isTouchDevice",()=>h])},67961,t=>{"use strict";let e;var i=t.i(43476),r=t.i(71645),s=t.i(17255),n=class{t(...t){t.forEach(([t,e,i])=>{this.i.addEventListener(t,e,null!=i?i:{passive:!1})})}h(...t){t.forEach(([t,e])=>{this.i.removeEventListener(t,e)})}o(t,e){this.i.dispatchEvent(new CustomEvent(t,{detail:e}))}},o=((e=o||{})[e.IDLE=0]="IDLE",e[e.PENDING=1]="PENDING",e[e.DRAGGING=2]="DRAGGING",e[e.MOVING=3]="MOVING",e[e.HOLDING=4]="HOLDING",e[e.HOLD_DRAGGING=5]="HOLD_DRAGGING",e[e.OUTSIDE=6]="OUTSIDE",e),a=class extends n{constructor(t){if(super(),this.u=!1,this.p=!1,this.v=0,this.l=new s.Vector2,this._=new s.Vector2,this.P=new s.Vector2,this.D=new s.Vector2,this.m=.5,this.S=.25,this.G=10,this.I=0,this.i=t.target,this.L=t.animator,this.N=t.clock,this.H=t.isInteractable,t.startPosition){const{x:e,y:i}=t.startPosition;this.l.set(e,i),this._.set(e,i)}this.M(t)}M(t){this.m=t.idleThreshold,this.S=t.tapThreshold,this.G=t.movingDeltaLimit}O(){return this.u?(console.warn("Already running"),!1):(this.u=!0,this.v=0,!0)}T(){this.u=!1,this.v=0}A(t){this.v=1;let{elapsedTime:e}=this.N.getTime();this.I=e,this.P.set(0,0),this.p=this.H(t.target)}C(t){switch(this.v){case 0:case 1:this.P.lengthSq()>this.G&&(this.v=3)}this.p=this.H(t.target),this.L.add({id:"IDLE",duration:this.m,autoPause:!1,onEnd:t=>{t||3!==this.v||(this.v=0)}})}R(t){let{elapsedTime:e}=this.N.getTime();1===this.v&&e<this.I+this.S&&this.o("tap",{target:t.target,position:{x:this.l.x,y:this.l.y}}),this.v=0}U(t,e){this._.set(t,e),this.P.sub(this._,this.l),this.D.add(this.P),this.l.copy(this._)}},h=class{constructor(t){this.V=t}updateSettings(t){this.V.M(t)}getState(){return o[this.V.v]}canInteract(){return this.V.p}getPosition(){return this.V.l}getDelta(){return this.V.P}getDeltaAdditive(){return this.V.D}},l=class extends h{constructor(t){super(t),this.j=!1,this.A=this.A.bind(this),this.C=this.C.bind(this),this.R=this.R.bind(this),this.k=this.k.bind(this),this.q=this.q.bind(this),this.B=this.B.bind(this)}startEvents(){this.V.O()&&this.V.t(["pointerdown",this.A],["pointermove",this.C],["pointerleave",this.k],["dragstart",this.q])}stopEvents(){this.V.T(),this.V.h(["pointerdown",this.A],["pointermove",this.C],["pointerup",this.R],["pointercancel",this.R],["pointerleave",this.k],["dragstart",this.q],["dragover",this.C],["dragend",this.B])}F(t){return{x:t.clientX,y:t.clientY}}A(t){this.V.t(["pointerup",this.R],["pointercancel",this.R]),this.V.A(t)}R(t){this.j=!0,this.V.h(["pointerup",this.R],["pointercancel",this.R]),2!==this.V.v&&this.V.R(t)}C(t){if(this.j)return void(this.j=!1);let{x:e,y:i}=this.F(t);6===this.V.v&&(this.V.l.set(e,i),this.V._.set(e,i),this.V.v=3),this.V.U(e,i),2!==this.V.v&&this.V.C(t)}k(t){5===this.V.v&&this.V.R(t),this.V.v=6}q(t){this.V.t(["dragover",this.C],["dragend",this.B]),this.V.v=2}B(t){this.V.h(["dragover",this.C],["dragend",this.B]),this.V.v=0}},u=class extends h{constructor(t){super(t),this.A=this.A.bind(this),this.C=this.C.bind(this),this.R=this.R.bind(this)}startEvents(){this.V.O()&&this.V.t(["touchstart",this.A])}stopEvents(){this.V.h(["touchstart",this.A],["touchmove",this.C],["touchend",this.R]),this.V.T()}F(t){return{x:t.touches[0].clientX,y:t.touches[0].clientY}}A(t){this.V.t(["touchmove",this.C],["touchend",this.R]);let{x:e,y:i}=this.F(t);this.V.l.set(e,i),this.V.A(t)}R(t){this.V.h(["touchmove",this.C],["touchend",this.R]),this.V.R(t)}C(t){let{x:e,y:i}=this.F(t);this.V.U(e,i),this.V.C(t)}},c=class extends a{constructor(t){super(t),this.J=null,this.K=.35,this.W=!1,this.X=t.isHoldable,this.M(t)}M(t){super.M(t),this.K=t.holdThreshold}A(t){t.target&&this.X(t.target)&&(this.W=!0,this.L.add({id:"HOLD",duration:this.K,autoPause:!1,onEnd:e=>{e||1!==this.v||this.Y(t)}})),super.A(t)}C(t){4!==this.v&&5!==this.v||(t.stopImmediatePropagation(),t.preventDefault(),this.v=5),this.W=!1,super.C(t)}R(t){switch(this.J&&(this.v=4),this.v){case 5:case 4:this.Z(t)}super.R(t)}Y(t){this.v=4,this.o("hold",{target:t.target,position:{x:this.l.x,y:this.l.y}}),this.J=t.target,this.J.dataset.holded="1"}Z(t){this.o("holdend",{target:this.J,endTarget:t.target,position:{x:this.l.x,y:this.l.y}}),this.J.dataset.holded="0",this.J=null}};let d={tapThreshold:.25,idleThreshold:.5,holdThreshold:.1,movingDeltaLimit:10},f=(0,r.createContext)(void 0);function p({children:t}){let e=(0,r.useRef)(new s.PronotronClock),n=(0,r.useRef)(new s.PronotronAnimator(e.current)),[o,a]=(0,r.useState)(null);return((0,r.useEffect)(()=>{var t;let i,r,o=(t={...d,startPosition:{x:window.innerWidth/2,y:window.innerHeight/2},target:window.document.body,animator:n.current,clock:e.current,isInteractable:t=>(o._test=t.closest(".parallaxScene"),!!(t.closest("a")||t.closest("button")||t.closest(".holdable"))),isHoldable:t=>!!t.closest(".parallaxScene")},i=(0,s.isTouchDevice)(),r=new c(t),i?new u(r):new l(r));o.startEvents();let h=0,f=()=>{e.current.tick(),n.current.tick(),h=requestAnimationFrame(f)};h=requestAnimationFrame(f);let p=()=>{document.hidden?e.current.pause():e.current.resume()};return document.addEventListener("visibilitychange",p),a(o),()=>{cancelAnimationFrame(h),document.removeEventListener("visibilitychange",p),o.stopEvents()}},[]),(0,r.useEffect)(()=>()=>{},[]),o)?(0,i.jsx)(f,{value:{pointerController:o,animatorRef:n},children:t}):null}t.s(["PronotronPointerProvider",()=>p,"defaultPointerSettings",0,d,"usePointerContext",0,()=>{let t=(0,r.useContext)(f);if(!t)throw Error("usePointerContext must be used within a PronotronPointerProvider");return t}],67961)},55984,t=>{"use strict";var e=t.i(43476),i=t.i(71645),r=t.i(67961);let s=(0,i.createContext)(void 0);function n({children:t}){let{pointerController:n}=(0,r.usePointerContext)(),{x:o,y:a}=n.getPosition(),[h,l]=(0,i.useState)({x:o,y:a}),[u,c]=(0,i.useState)({x:o,y:a}),d=(0,i.useRef)({x:o,y:a}),[f,p]=(0,i.useState)({x:0,y:0}),[g,m]=(0,i.useState)({x:0,y:0}),v=(0,i.useRef)({x:0,y:0}),y=(0,i.useRef)({x:0,y:0}),[b,x]=(0,i.useState)(""),[w,E]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=0,e=()=>{let i=n.getPosition();d.current.x+=(i.x-d.current.x)*.1,d.current.y+=(i.y-d.current.y)*.1,l({x:i.x,y:i.y}),c({x:d.current.x,y:d.current.y});let r=n.getDeltaAdditive();y.current.x=r.x-v.current.x,y.current.y=r.y-v.current.y,v.current.x+=.1*y.current.x,v.current.y+=.1*y.current.y,p(n.getDelta()),m(y.current),x(n.getState()),E(n.canInteract()),t=requestAnimationFrame(e)};return t=requestAnimationFrame(e),()=>{cancelAnimationFrame(t)}},[]),(0,e.jsx)(s,{value:{pointerPosition:h,pointerEasedPosition:u,pointerDelta:f,pointerDeltaAdditive:g,pointerTargetInteractable:w,pointerState:b},children:t})}t.s(["PronotronPointerDataProvider",()=>n,"usePointerDataContext",0,()=>{let t=(0,i.useContext)(s);if(!t)throw Error("usePointerDataContext must be used within a PronotronPointerDataProvider");return t}])},26199,48568,t=>{"use strict";var e,i,r,s=[],n="ResizeObserver loop completed with undelivered notifications.",o=function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:n}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=n),window.dispatchEvent(t)};(e=i||(i={})).BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var a=function(t){return Object.freeze(t)},h=function(t,e){this.inlineSize=t,this.blockSize=e,a(this)},l=function(){function t(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,a(this)}return t.prototype.toJSON=function(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),u=function(t){return t instanceof SVGElement&&"getBBox"in t},c=function(t){if(u(t)){var e=t.getBBox(),i=e.width,r=e.height;return!i&&!r}var s=t.offsetWidth,n=t.offsetHeight;return!(s||n||t.getClientRects().length)},d=function(t){if(t instanceof Element)return!0;var e,i=null==(e=null==t?void 0:t.ownerDocument)?void 0:e.defaultView;return!!(i&&t instanceof i.Element)},f=function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},p="undefined"!=typeof window?window:{},g=new WeakMap,m=/auto|scroll/,v=/^tb|vertical/,y=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),b=function(t){return parseFloat(t||"0")},x=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),new h((i?e:t)||0,(i?t:e)||0)},w=a({devicePixelContentBoxSize:x(),borderBoxSize:x(),contentBoxSize:x(),contentRect:new l(0,0,0,0)}),E=function(t,e){if(void 0===e&&(e=!1),g.has(t)&&!e)return g.get(t);if(c(t))return g.set(t,w),w;var i=getComputedStyle(t),r=u(t)&&t.ownerSVGElement&&t.getBBox(),s=!y&&"border-box"===i.boxSizing,n=v.test(i.writingMode||""),o=!r&&m.test(i.overflowY||""),h=!r&&m.test(i.overflowX||""),d=r?0:b(i.paddingTop),f=r?0:b(i.paddingRight),p=r?0:b(i.paddingBottom),E=r?0:b(i.paddingLeft),T=r?0:b(i.borderTopWidth),A=r?0:b(i.borderRightWidth),R=r?0:b(i.borderBottomWidth),P=r?0:b(i.borderLeftWidth),S=E+f,_=d+p,I=P+A,C=T+R,M=h?t.offsetHeight-C-t.clientHeight:0,L=o?t.offsetWidth-I-t.clientWidth:0,O=r?r.width:b(i.width)-(s?S+I:0)-L,k=r?r.height:b(i.height)-(s?_+C:0)-M,B=O+S+L+I,D=k+_+M+C,U=a({devicePixelContentBoxSize:x(Math.round(O*devicePixelRatio),Math.round(k*devicePixelRatio),n),borderBoxSize:x(B,D,n),contentBoxSize:x(O,k,n),contentRect:new l(E,d,O,k)});return g.set(t,U),U},T=function(t,e,r){var s=E(t,r),n=s.borderBoxSize,o=s.contentBoxSize,a=s.devicePixelContentBoxSize;switch(e){case i.DEVICE_PIXEL_CONTENT_BOX:return a;case i.BORDER_BOX:return n;default:return o}},A=function(t){var e=E(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=a([e.borderBoxSize]),this.contentBoxSize=a([e.contentBoxSize]),this.devicePixelContentBoxSize=a([e.devicePixelContentBoxSize])},R=function(t){if(c(t))return 1/0;for(var e=0,i=t.parentNode;i;)e+=1,i=i.parentNode;return e},P=function(){var t=1/0,e=[];s.forEach(function(i){if(0!==i.activeTargets.length){var r=[];i.activeTargets.forEach(function(e){var i=new A(e.target),s=R(e.target);r.push(i),e.lastReportedSize=T(e.target,e.observedBox),s<t&&(t=s)}),e.push(function(){i.callback.call(i.observer,r,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var i=0;i<e.length;i++)(0,e[i])();return t},S=function(t){s.forEach(function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach(function(i){i.isActive()&&(R(i.target)>t?e.activeTargets.push(i):e.skippedTargets.push(i))})})},_=function(){var t=0;for(S(0);s.some(function(t){return t.activeTargets.length>0});)S(t=P());return s.some(function(t){return t.skippedTargets.length>0})&&o(),t>0},I=[],C=function(t){if(!r){var e=0,i=document.createTextNode("");new MutationObserver(function(){return I.splice(0).forEach(function(t){return t()})}).observe(i,{characterData:!0}),r=function(){i.textContent="".concat(e?e--:e++)}}I.push(t),r()},M=function(t){C(function(){requestAnimationFrame(t)})},L=0,O={attributes:!0,characterData:!0,childList:!0,subtree:!0},k=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],B=function(t){return void 0===t&&(t=0),Date.now()+t},D=!1,U=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!D){D=!0;var i=B(t);M(function(){var r=!1;try{r=_()}finally{if(D=!1,t=i-B(),!L)return;r?e.run(1e3):t>0?e.run(t):e.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,O)};document.body?e():p.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),k.forEach(function(e){return p.addEventListener(e,t.listener,!0)}))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),k.forEach(function(e){return p.removeEventListener(e,t.listener,!0)}),this.stopped=!0)},t}()),N=function(t){!L&&t>0&&U.start(),(L+=t)||U.stop()},V=function(){function t(t,e){this.target=t,this.observedBox=e||i.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=T(this.target,this.observedBox,!0);return u(t=this.target)||f(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),z=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},F=new WeakMap,X=function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].target===e)return i;return -1},W=function(){function t(){}return t.connect=function(t,e){var i=new z(t,e);F.set(t,i)},t.observe=function(t,e,i){var r=F.get(t),n=0===r.observationTargets.length;0>X(r.observationTargets,e)&&(n&&s.push(r),r.observationTargets.push(new V(e,i&&i.box)),N(1),U.schedule())},t.unobserve=function(t,e){var i=F.get(t),r=X(i.observationTargets,e),n=1===i.observationTargets.length;r>=0&&(n&&s.splice(s.indexOf(i),1),i.observationTargets.splice(r,1),N(-1))},t.disconnect=function(t){var e=this,i=F.get(t);i.observationTargets.slice().forEach(function(i){return e.unobserve(t,i.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t}(),H=function(){function t(t){if(0==arguments.length)throw TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");W.connect(this,t)}return t.prototype.observe=function(t,e){if(0==arguments.length)throw TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!d(t))throw TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");W.observe(this,t,e)},t.prototype.unobserve=function(t){if(0==arguments.length)throw TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!d(t))throw TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");W.unobserve(this,t)},t.prototype.disconnect=function(){W.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();t.s(["ResizeObserver",()=>H],48568),t.s([],26199)},17854,t=>{"use strict";var e=t.i(43476),i=t.i(71645);t.i(26199);var r=t.i(48568),s=Object.defineProperty,n=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(t,e,i)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,c=(t,e)=>{for(var i in e||(e={}))h.call(e,i)&&u(t,i,e[i]);if(a)for(var i of a(e))l.call(e,i)&&u(t,i,e[i]);return t},d=(t,e,i)=>new Promise((r,s)=>{var n=t=>{try{a(i.next(t))}catch(t){s(t)}},o=t=>{try{a(i.throw(t))}catch(t){s(t)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(n,o);a((i=i.apply(t,e)).next())}),f=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}*[Symbol.iterator](){yield this.x,yield this.y}},p=class{getX(t){let e=this.t(t);return this.array[e]}setX(t,e){let i=this.t(t);return this.array[i]=e,this}getY(t){let e=this.t(t)+1;return this.array[e]}setY(t,e){let i=this.t(t)+1;return this.array[i]=e,this}getZ(t){let e=this.t(t)+2;return this.array[e]}setZ(t,e){let i=this.t(t)+2;return this.array[i]=e,this}getW(t){let e=this.t(t)+3;return this.array[e]}setW(t,e){let i=this.t(t)+3;return this.array[i]=e,this}setXY(t,e,i){let r=this.t(t);return this.array[r+0]=e,this.array[r+1]=i,this}setXYZ(t,e,i,r){let s=this.t(t);return this.array[s+0]=e,this.array[s+1]=i,this.array[s+2]=r,this}setXYZW(t,e,i,r,s){let n=this.t(t);return this.array[n+0]=e,this.array[n+1]=i,this.array[n+2]=r,this.array[n+3]=s,this}},g=new f,m=0,v=class extends p{constructor(t,e,i=!1){if(super(),this.isBufferAttribute=!0,this.version=0,this.name="",this.usage=35044,this.gpuType=1015,this.updateRanges=[],Array.isArray(t))throw TypeError("BufferAttribute: array should be a Typed Array.");this.array=t,this.itemSize=e,this.normalized=i,this.version=0,this.count=void 0!==t?t.length/e:0,m++,this.id=m}t(t){return t*this.itemSize}clearUpdateRanges(){this.updateRanges.length=0}onUploadCallback(){}set(t,e=0){return this.array.set(t,e),this}applyPos(t){for(let e=0,i=this.count;e<i;e++)g.fromBufferAttribute(this,e),g.applyMatrix3(t),this.setXY(e,g.x,g.y)}},y=class extends v{constructor(t,e){super(new Uint16Array(t),e)}},b=class extends v{constructor(t,e){super(new Float32Array(t),e)}},x=new class{constructor(){this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,r,s,n,o,a,h){let l=this.elements;return l[0]=t,l[1]=r,l[2]=o,l[3]=e,l[4]=s,l[5]=a,l[6]=i,l[7]=n,l[8]=h,this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}},w=class t{constructor(){this.id=t.i++,this.name="",this.drawRange={start:0,count:1/0},this.index=null,this.attributes={},this.groups=[]}translate(t=0,e=0){x.makeTranslation(t,e),this.attributes.position.applyPos(x)}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new y(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,e.name=t,this}deleteAttribute(t){return delete this.attributes[t],this}addGroup(t,e,i){this.groups.push({id:i,start:t,count:e})}};w.i=0;var E=w,T=class extends E{constructor(t,e=1,i=1){super(),this.name="ParallaxGeometry";let r=0;const s=Math.floor(e),n=Math.floor(i),o=s+1,a=n+1,h=1/s,l=1/n,u=[],c=[];for(let t=0;t<a;t++){const e=t*l-.5;for(let i=0;i<o;i++){const r=i*h-.5;u.push(r,-e),c.push(i/s),c.push(1-t/n)}}r=u.length/2;const d=[];for(let t=0;t<n;t++)for(let e=0;e<s;e++){const i=e+o*t,r=e+o*(t+1),s=e+1+o*(t+1),n=e+1+o*t;d.push(i,r,n),d.push(r,s,n)}const f=[],{w:p,h:g,x:m,y:v}=t.atlas.normalized;for(let t=0;t<4*r;t+=4)f[t+0]=p,f[t+1]=g,f[t+2]=m,f[t+3]=v;const y=[];for(let e=0;e<2*r;e+=2)y[e+0]=t.settings.parallax.x||0,y[e+1]=t.settings.parallax.y||0;const x=[];for(let e=0;e<2*r;e+=2)x[e+0]=t.atlas.w,x[e+1]=t.atlas.h;this.setIndex(d),this.setAttribute("position",new b(u,2)),this.setAttribute("uv",new b(c,2)),this.setAttribute("atlas",new b(f,4)),this.setAttribute("parallax",new b(y,2)),this.setAttribute("scale",new b(x,2))}},A=class{constructor(t,e){this.version=0,this.usage=35044,this.updateRanges=[],this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0}clearUpdateRanges(){this.updateRanges.length=0}onUploadCallback(){}set(t,e=0){return this.array.set(t,e),this}},R=class extends p{constructor(t,e,i,r=!1){super(),this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get array(){return this.data.array}get count(){return this.data.count}t(t){return t*this.data.stride+this.offset}},P=class{constructor(){this.dirty=!0,this.x=0,this.y=0,this.w=0,this.h=0}set({x:t,y:e,w:i,h:r}){return this.x=t,this.y=e,this.w=i,this.h=r,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.w*=t,this.h*=t,this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.w=Math.floor(this.w),this.h=Math.floor(this.h),this}},S=class{constructor(t){this.active=!0,this.pointer={x:.5,y:.5},this.rect=new P,this.id=t.id,this.settings=t,this.geometry=this.o(t.layers),this.material=t.material,this.texture=t.texture,this.material.updateUniforms({u_texture:{value:this.texture}})}setPointer(t,e){this.pointer.x=t,this.pointer.y=e}setRect(t){this.rect.set(t),this.rect.dirty=!0,this.resize(t.w,t.h)}resize(t,e){let i=this.geometry.attributes.scale;this.l(t,e,i)}o(t){let e=[];for(let i of t){let t=new T(i);t.name=i.id,i.settings.translate&&t.translate(i.settings.translate.x,i.settings.translate.y),e.push(t)}return function(t,e=!1){let i=new E,r={},s=0;for(let n=0;n<t.length;++n){let o=t[n];for(let t in o.attributes){r[t]||(r[t]=[]);let e=o.attributes[t];e instanceof v&&r[t].push(e)}if(e&&o.index){let t=o.index.count;i.addGroup(s,t,o.name),s+=t}}let n=0,o=[];for(let e=0;e<t.length;++e){let i=t[e].index;for(let t=0;t<i.count;++t)o.push(i.getX(t)+n);n+=t[e].attributes.position.count}for(let t in i.setIndex(o),r){let e=function(t){let e=0,i=0;for(let r=0;r<t.length;++r){let s=t[r];0===e&&(e=s.itemSize),i+=s.array.length}let r=new Float32Array(i),s=0;for(let e=0;e<t.length;++e)r.set(t[e].array,s),s+=t[e].array.length;return new v(r,e)}(r[t]);i.setAttribute(t,e)}return i}(e,!0)}l(t,e,i){for(let{id:r,ratio:s,settings:n}of this.settings.layers){if(!n.fit)return;let o=0,a=0;if(n.fit.h?o=(a=e*n.fit.h)*s:n.fit.w&&(a=(o=t*n.fit.w)/s),!o||!a)return void console.error(`Scene: '${this.settings.id}' (width: ${o}, height: ${a}). Scaling failed`);o=Math.floor(o),a=Math.floor(a);let h=this.geometry.groups.find(t=>t.id===r);for(let t=0;t<h.count;t++){let e=this.geometry.index.getX(h.start+t);i.setXY(e,o,a)}}i instanceof R?i.data.version++:i.version++}},_=class extends S{constructor(t){super(t),this.u()}resize(t,e){let i=this.attributes.find(t=>"scale"===t.name);this.l(t,e,i)}u(){let t=function(t){let e,i=0,r=0;for(let s=0,n=t.length;s<n;++s){let n=t[s];if(void 0===e&&(e=n.array.constructor),e!==n.array.constructor)throw Error("Different array types cannot be interleaved");i+=n.array.length,r+=n.itemSize}let s=new A(new Float32Array(i),r),n=0,o=[],a=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"];for(let e=0,i=t.length;e<i;e++){let i=t[e],r=i.itemSize,l=i.count,u=new R(s,r,n);u.name=i.name,o.push(u),n+=r;for(let t=0;t<l;t++)for(let e=0;e<r;e++)u[h[e]](t,i[a[e]](t))}return o}(Object.values(this.geometry.attributes));this.attributes=t}},I=class t{constructor(e){this.id=t.i++;const{uniforms:i,vertex:r,fragment:s}=e,n=((t,e)=>{var i={};for(var r in t)h.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&a)for(var r of a(t))0>e.indexOf(r)&&l.call(t,r)&&(i[r]=t[r]);return i})(e,["uniforms","vertex","fragment"]);this.uniforms=i,this.vertex=r,this.fragment=s,this.shadingSettings=n}updateUniforms(t){this.uniforms=c(c({},this.uniforms),t)}};I.i=0;var C=new I({vertex:"attribute vec2 position;attribute vec2 uv;attribute vec4 atlas;attribute vec2 parallax;attribute vec2 scale;uniform vec2 u_pointer;uniform vec2 u_resolution;varying vec2 vUv;void main(){vUv=(uv*atlas.xy)+atlas.zw;vec2 b0=position*scale;vec2 c0=(u_resolution-scale)/2.0;vec2 d0=(u_pointer*2.0)-1.0;vec2 e0=c0*parallax*d0;b0+=e0;vec2 f0=b0/u_resolution*vec2(2,-2);gl_Position=vec4(f0,0,1);}",fragment:"precision mediump float;uniform sampler2D u_texture;varying vec2 vUv;void main(){vec4 a0=texture2D(u_texture,vUv);gl_FragColor=a0;}",transparent:!0,uniforms:{u_texture:{value:null},u_resolution:{value:{x:0,y:0}},u_pointer:{value:{x:.5,y:.5}}}}),M=class{constructor(t){this.scenes=new Map,this.p=t.loader,this.m=t.glController,this.v=t.renderController,this._=t.resourceController}initScene(t,e){return d(this,null,function*(){try{let{id:i,layers:r}=t;if(this.scenes.has(i)){let t=this.scenes.get(i);return t.active=!0,t}let s=yield this.p.loadImagesAsync(r,e),{image:n,data:o,hash:a}=yield this._.merge(s,{alpha:!0}),h=this._.createTexture(a,n,{premultiplyAlpha:!0});for(let{url:e,file:i}of(this._.add(`Merged:${t.id}`,n),s))this._.add(e,i);let l=r.map((t,e)=>{let i=o.atlas.find(e=>e.id===t.url);if(!i)throw Error(`ParallaxManager: '${t.url}' texture packing error.`);return{id:`${e}`,image:t.url,settings:t,atlas:i,ratio:i.w/i.h}}),u=new _({id:i,layers:l,texture:h,material:C});return this.scenes.set(u.id,u),u}catch(t){throw t}})}updateResolution(t,e,i=1){this.v.setPixelRatio(i),this.v.updateResolution(t,e)}dispose(t){for(let e of t.settings.layers)this._.deleteImage(e.image);this._.deleteImage(`Merged:${t.id}`),this.v.dispose(t),this.scenes.delete(t.id)}render(){let t=this.m.gl;t.clear(t.COLOR_BUFFER_BIT),this.scenes.forEach(t=>{t.active&&this.v.render(t)})}},L={alpha:!1,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1},O=class{constructor({canvas:t,version:e="2",attributes:i={}}){this.version=e,this.canvas=t,this.gl=this.A(c(c({},L),i))}A(t){try{this.canvas.addEventListener("webglcontextlost",function(t){t.preventDefault()},!1),this.canvas.addEventListener("webglcontextrestored",function(){},!1),this.canvas.addEventListener("webglcontextcreationerror",function(t){},!1);let e=["webgl2","webgl"];"1"===this.version&&e.shift();let i=this.M(e,t);if(null===i)throw this.M(e)?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");return i}catch(t){throw console.error(`WebGL error: ${t instanceof Error?t.message:"Unknown error."}`),t}}M(t,e){for(let i=0;i<t.length;i++){let r=t[i],s=this.canvas.getContext(r,e);if(null!==s)return s}return null}},k=class{constructor(t){this.frame=0,this.$=1,this.R=t.context,this.S=t.buffersHelper,this.k=t.attributesHelper,this.I=t.programHelper,this.T=t.uniformsHelper,this.P=t.extensions;const e=this.R;e.enable(e.CULL_FACE),e.cullFace(e.FRONT),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.clearColor(0,0,0,1),e.disable(e.SCISSOR_TEST)}setPixelRatio(t=1){this.$=t}updateResolution(t,e){let i=this.R.canvas;i.width=Math.floor(t*this.$),i.height=Math.floor(e*this.$),i.style.width=t+"px",i.style.height=e+"px"}render(t){let e=this.R;if(this.C!==t.material.id){if(!t.material.programInfo){let{vertex:e,fragment:i}=t.material;t.material.programInfo=this.I.createProgramInfo([e,i])}e.useProgram(t.material.programInfo.program),this.C=t.material.id}this.U(t),t.rect.dirty&&(t.rect.multiplyScalar(this.$).floor(),t.rect.dirty=!1);let{x:i,y:r,w:s,h:n}=t.rect,o=t.material.programInfo.uniformsData,a={u_resolution:{value:{x:s/this.$,y:n/this.$}},u_pointer:{value:t.pointer}};this.O!==t?(a.u_texture={value:t.texture},this.T.bindUniforms(o,a),this.O=t):this.T.bindUniforms(o,a),this.P.bindVertexArray(t.vao),e.viewport(i,r,s,n),e.scissor(i,r,s,n),e.drawElements(e.TRIANGLES,t.geometry.index.count,e.UNSIGNED_SHORT,0),this.P.bindVertexArray(null),this.frame++}dispose(t){Object.values(t.geometry.attributes).forEach((t,e)=>{this.S.remove(t)}),this.S.remove(t.attributes[0].data),this.S.remove(t.geometry.index),this.R.deleteTexture(t.texture)}U(t){this.S.update(t.attributes[0].data,this.R.ARRAY_BUFFER),this.S.update(t.geometry.index,this.R.ELEMENT_ARRAY_BUFFER),t.vao||this.W(t)}W(t){let{P:e,S:i,k:r}=this,s=t.material.programInfo.attributesData;t.vao=e.createVertexArray(),e.bindVertexArray(t.vao),r.bindInterleavedAttributes(t.attributes,s,i.get(t.attributes[0].data)),r.bindIndices(i.get(t.geometry.index)),e.bindVertexArray(null)}B(t){let{P:e,S:i,k:r}=this,s=t.material.programInfo.attributesData;t.vao=e.createVertexArray(),e.bindVertexArray(t.vao),Object.values(t.geometry.attributes).forEach((t,e)=>{let n=s.find(e=>e.name===t.name),o=i.get(t);r.bindStandardAttribute(t,n,o)}),r.bindIndices(i.get(t.geometry.index)),e.bindVertexArray(null)}},B=class{constructor(t){this.X=t.getExtension("OES_vertex_array_object")}createVertexArray(){return this.X.createVertexArrayOES()}bindVertexArray(t){this.X.bindVertexArrayOES(t)}},D=class{constructor(t){this.D=t}createVertexArray(){return this.D.createVertexArray()}bindVertexArray(t){this.D.bindVertexArray(t)}},U=class{constructor(t){this.L=new Map,this.j=new Map,this.F=new Map,this.G=t.textureHelper,this.H=t.texturePacker}createTexture(t,e,i){let r=this.j.get(t);if(r)return r;let s=this.G.createTexture(e,i);return this.j.set(t,s),s}deleteImage(t){let e=this.L.get(t);e&&(e.close(),this.L.delete(t))}deleteTexture(t){this.j.delete(t)}add(t,e){this.L.has(t)||this.L.set(t,e)}merge(t){return d(this,arguments,function*(t,e={alpha:!0}){let i=[...new Map(t.map(t=>[t.url,t])).values()],r=function(t){let e=[...t].sort().join("|"),i=0x811c9dc5;for(let t=0;t<e.length;t++)i^=e.charCodeAt(t),i=Math.imul(i,0x1000193);return(i>>>0).toString(16).padStart(8,"0")}(i.map(t=>t.url)),s=this.F.get(r);if(s)return s;try{let t=i.map(t=>({id:t.url,source:t.file})),s=this.H.pack(t),{mergedImage:n,finalPackResult:o}=yield this.H.V(s,!0,e);return this.F.set(r,{image:n,data:o,hash:r}),{image:n,data:o,hash:r}}catch(t){throw t}})}Y(t,e){this.H.Z(t,{alpha:!0})}},N=class{constructor(t){this.buffers=new WeakMap,this.gl=t}get(t){return this.buffers.get(t)}remove(t){let e=this.buffers.get(t);e&&(this.gl.deleteBuffer(e.buffer),this.buffers.delete(t))}update(t,e){let i=this.buffers.get(t);if(void 0!==i){if(i.version<t.version){if(i.size!==t.array.byteLength)throw Error("WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");return this.N(i.buffer,t,e),void(i.version=t.version)}}else this.buffers.set(t,this.q(t,e))}q(t,e){let i,r=this.gl,s=t.array,n=t.usage,o=r.createBuffer();if(r.bindBuffer(e,o),r.bufferData(e,s,n),s instanceof Float32Array)i=r.FLOAT;else if(s instanceof Uint16Array)if("isFloat16BufferAttribute"in t){if(r instanceof WebGLRenderingContext)throw Error("Uint16Array only supported with WebGL 2");i=r.HALF_FLOAT}else i=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)i=r.SHORT;else if(s instanceof Uint32Array)i=r.UNSIGNED_INT;else if(s instanceof Int32Array)i=r.INT;else if(s instanceof Int8Array)i=r.BYTE;else if(s instanceof Uint8Array)i=r.UNSIGNED_BYTE;else{if(!(s instanceof Uint8ClampedArray))throw Error("WebGLAttributes: Unsupported buffer data format: "+s);i=r.UNSIGNED_BYTE}return{buffer:o,type:i,version:t.version,bytesPerElement:s.BYTES_PER_ELEMENT,size:s.byteLength}}N(t,e,i){let r=this.gl,s=e.array,n=e.updateRanges;if(r.bindBuffer(i,t),0===n.length)r.bufferSubData(i,0,s);else{n.sort((t,e)=>t.start-e.start);let t=0;for(let e=1;e<n.length;e++){let i=n[t],r=n[e];r.start<=i.start+i.count+1?i.count=Math.max(i.count,r.start+r.count-i.start):n[++t]=r}n.length=t+1;for(let t=0,e=n.length;t<e;t++){let e=n[t];this.gl.bufferSubData(i,e.start*s.BYTES_PER_ELEMENT,s,e.start,e.count)}e.clearUpdateRanges()}e.onUploadCallback()}},V=class{constructor(t){this.gl=t}createProgramInfo(t){let e=this.K(t,{position:0,uv:1,atlas:2});return{program:e,attributesData:this.J(e),uniformsData:this.tt(e)}}K(t,e){let i=this.gl,r=t.map((t,e)=>{let r=i.createShader(0===e?i.VERTEX_SHADER:i.FRAGMENT_SHADER);if(!r)throw Error("Shader could not be created.");if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){let t=i.getShaderSource(r),e=i.getShaderInfoLog(r);throw i.deleteShader(r),Error(`Could not compile shader: ${e}

${t}`)}return r}),s=i.createProgram();if(r.forEach(t=>i.attachShader(s,t)),e&&Object.keys(e).forEach((t,e)=>{i.bindAttribLocation(s,e,t)}),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS)){let t=i.getProgramInfoLog(s);throw i.deleteProgram(s),Error(`Could not link program: ${t}`)}return s}J(t){let e=this.gl,i=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;++s){let r=e.getActiveAttrib(t,s);if(!r)throw Error(`WebGLActiveInfo missing: Index '${s}'`);let n=r.name,o=e.getAttribLocation(t,n),a=n.startsWith("instance");i.push({name:r.name,size:r.size,type:r.type,location:o,instanced:a})}return i}tt(t){let e=this.gl,i=0,r=[],s=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){let s,o=e.getActiveUniform(t,n);if(!o)throw Error(`WebGL UniformInfo missing: Index '${n}'`);let a=o.name;a.endsWith("[0]")&&(a=a.slice(0,-3));let h=e.getUniformLocation(t,o.name);if(!h)continue;let l=o.type===e.SAMPLER_2D||o.type===e.SAMPLER_CUBE,u=o.name.endsWith("[0]");switch(!0){case l:s={type:"TEXTURE",unit:i++};break;case u:s={type:"ARRAY"};break;default:s={type:"STANDARD"}}r.push({name:a,size:o.size,type:o.type,location:h,model:s})}return r}},z=class{constructor(t){this.gl=t}bindIndices(t){let e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.buffer)}bindStandardAttribute(t,e,i){let r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,i.buffer),r.enableVertexAttribArray(e.location),r.vertexAttribPointer(e.location,t.itemSize,i.type,!1,0,0)}bindInterleavedAttributes(t,e,i){let r=this.gl;for(let s of(r.bindBuffer(r.ARRAY_BUFFER,i.buffer),t)){let t=e.find(t=>t.name===s.name);t?(r.enableVertexAttribArray(t.location),r.vertexAttribPointer(t.location,s.itemSize,i.type,!1,i.bytesPerElement*s.data.stride,i.bytesPerElement*s.offset)):console.error(`Attribute '${s.name}' is not declared in the shader program.`)}}},F=class{constructor(t){this.gl=t}bindUniforms(t,e){let i=this.gl;Object.keys(e).forEach(r=>{let s=t.find(t=>t.name===r);if(!s)return void delete e[r];let n=e[r].value;switch(s.model.type){case"TEXTURE":this.st(s,n);break;case"ARRAY":throw Error(`Unsupported uniform type: ${s.type}`);case"STANDARD":switch(s.type){case i.FLOAT:this.et(s,n);break;case i.FLOAT_VEC2:this.it(s,[n.x,n.y]);break;case i.FLOAT_VEC3:this.rt(s,n);break;case i.FLOAT_VEC4:this.nt(s,n);break;case i.FLOAT_MAT3:this.ot(s,n);break;default:throw Error(`Unsupported uniform type: ${s.type}`)}}})}st(t,e){let i=this.gl,r=t.model;i.uniform1i(t.location,r.unit),i.activeTexture(i.TEXTURE0+r.unit),i.bindTexture(t.type===i.SAMPLER_2D?i.TEXTURE_2D:i.TEXTURE_CUBE_MAP,e)}et(t,e){this.gl.uniform1f(t.location,e)}it(t,e){this.gl.uniform2fv(t.location,e)}rt(t,e){this.gl.uniform3fv(t.location,e)}nt(t,e){this.gl.uniform4fv(t.location,e)}ot(t,e){this.gl.uniformMatrix3fv(t.location,!1,e)}},X={target:3553,level:0,min:9986,mag:9729,internalFormat:6408,format:6408,type:5121,wrap:10497,wrapS:10497,wrapT:10497,wrapR:10497,auto:!0},W=class{constructor(t,e){this.D=t,this.ht=e}createTexture(t,e={}){var i,r;let s=this.D,n=c(c({},X),e),{target:o,level:a,internalFormat:h,format:l,type:u}=n;i=t.width,r=t.height,(i&i-1||r&r-1)&&(n.min=s.LINEAR,n.mag=s.LINEAR,n.wrap=s.CLAMP_TO_EDGE);let d=s.createTexture();return s.bindTexture(o,d),this.ct(n),s.texImage2D(o,a,h,l,u,t),this.lt(o,n),d}ct(t){let e=this.D;void 0!==t.unpackAlignment&&this.ut(e.UNPACK_ALIGNMENT,t.unpackAlignment),void 0!==t.premultiplyAlpha&&this.ut(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),void 0!==t.flipY&&this.ut(e.UNPACK_FLIP_Y_WEBGL,t.flipY),void 0!==t.colorspaceConversion&&this.ut(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)}lt(t,e){var i,r,s,n;let o=this.D,a=null!=(r=null!=(i=e.min)?i:e.minMag)?r:o.NEAREST_MIPMAP_NEAREST,h=null!=(n=null!=(s=e.mag)?s:e.minMag)?n:o.LINEAR;if(this.ft(t,o.TEXTURE_MIN_FILTER,a),this.ft(t,o.TEXTURE_MAG_FILTER,h),void 0!==e.wrap&&(this.ft(t,o.TEXTURE_WRAP_S,e.wrap),this.ft(t,o.TEXTURE_WRAP_T,e.wrap),"TEXTURE_WRAP_R"in o&&this.ft(t,o.TEXTURE_WRAP_R,e.wrap)),void 0!==e.wrapS&&this.ft(t,o.TEXTURE_WRAP_S,e.wrapS),void 0!==e.wrapT&&this.ft(t,o.TEXTURE_WRAP_T,e.wrapT),void 0!==e.wrapR&&"TEXTURE_WRAP_R"in o&&this.ft(t,o.TEXTURE_WRAP_R,e.wrapR),e.minLod&&o.TEXTURE_MIN_LOD&&this.dt(t,o.TEXTURE_MIN_LOD,e.minLod),e.maxLod&&o.TEXTURE_MAX_LOD&&this.dt(t,o.TEXTURE_MAX_LOD,e.maxLod),e.baseLevel&&o.TEXTURE_BASE_LEVEL&&this.ft(t,o.TEXTURE_BASE_LEVEL,e.baseLevel),e.maxLevel&&o.TEXTURE_MAX_LEVEL&&this.ft(t,o.TEXTURE_MAX_LEVEL,e.maxLevel),e.compareFunc&&o.TEXTURE_COMPARE_FUNC&&this.ft(t,o.TEXTURE_COMPARE_FUNC,e.compareFunc),e.compareMode&&o.TEXTURE_COMPARE_MODE&&this.ft(t,o.TEXTURE_COMPARE_MODE,e.compareMode),!1!==e.auto&&o.generateMipmap(t),e.aniso){let i=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");if(i){let r=o.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.dt(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r,e.aniso))}}}ut(t,e){this.D.pixelStorei(t,e)}ft(t,e,i){this.D.texParameteri(t,e,i)}dt(t,e,i){this.D.texParameterf(t,e,i)}},H=class{constructor(t){this.wt=t}V(t,e=!0,i){return d(this,null,function*(){let r,s=Math.max(t.size.w,t.size.h);if(this.wt<s){let e=this.wt/s;r={size:{w:t.size.w*e,h:t.size.h*e},atlas:t.atlas.map(t=>n(c({},t),o({x:t.x*e,y:t.y*e,w:t.w*e,h:t.h*e})))}}else r=t;let{canvas:a,context:h}=this.gt(r.size.w,r.size.h,e,i);for(let t of r.atlas)h.drawImage(t.source,t.x,t.y,t.w,t.h);return{mergedImage:yield createImageBitmap(a,{premultiplyAlpha:"none",colorSpaceConversion:"none"}),finalPackResult:r}})}gt(t,e,i,r){let s=i?new OffscreenCanvas(t,e):document.createElement("canvas"),n=s.getContext("2d",r);if(!n)throw Error(i?"Failed to get OffscreenCanvas 2D context.":"Failed to get 2D context for texture packing.");return i||(s.width=t,s.height=e),{canvas:s,context:n}}Z(t,e){let i=document.createElement("canvas"),r=i.getContext("2d",e);if(!r)throw Error("Context can't get while texture packing.");i.width=t.width,i.height=t.height,r.drawImage(t,0,0),document.body.appendChild(i)}},G=class extends H{constructor(){super(...arguments),this.vt=null}pack(t){if(!Array.isArray(t)||0===t.length)throw Error("TexturePacker.pack: images array must not be empty");let e=[...t].sort((t,e)=>e.source.width*e.source.height-t.source.width*t.source.height),i=e[0].source;this.vt={x:0,y:0,w:i.width,h:i.height,used:!1,right:null,down:null};let r=Array(e.length).fill(null);for(let t=0;t<e.length;t++){let i=e[t].source,s=i.width,n=i.height,o=this.bt(this.vt,s,n);if(r[t]=o?this.yt(o,s,n):this.xt(s,n),!r[t])throw Error(`Texture packing failed for image at index ${t} (${e[t].id}).`)}let s=e.map((t,e)=>{let i=r[e];return{id:t.id,source:t.source,x:i.x,y:i.y,w:t.source.width,h:t.source.height}}),a={w:this.vt.w,h:this.vt.h};return{atlas:s.map(t=>n(c({},t),o({normalized:{x:t.x/a.w,y:t.y/a.h,w:t.w/a.w,h:t.h/a.h}}))),size:a}}bt(t,e,i){if(!t)return null;let r=[t];for(;r.length;){let t=r.pop();if(t){if(t.used)t.right&&r.push(t.right),t.down&&r.push(t.down);else if(e<=t.w&&i<=t.h)return t}}return null}yt(t,e,i){return t.used=!0,t.down={x:t.x,y:t.y+i,w:t.w,h:t.h-i,used:!1,right:null,down:null},t.right={x:t.x+e,y:t.y,w:t.w-e,h:i,used:!1,right:null,down:null},t}xt(t,e){if(!this.vt)return null;let i=t<=this.vt.w,r=e<=this.vt.h,s=r&&this.vt.h>=this.vt.w+t,n=i&&this.vt.w>=this.vt.h+e;return s?this._t(t,e):n?this.At(t,e):r?this._t(t,e):i?this.At(t,e):null}_t(t,e){if(!this.vt)return null;let i=this.vt;this.vt={used:!0,x:0,y:0,w:i.w+t,h:i.h,down:i,right:{x:i.w,y:0,w:t,h:i.h,used:!1,right:null,down:null}};let r=this.bt(this.vt,t,e);return r?this.yt(r,t,e):null}At(t,e){if(!this.vt)return null;let i=this.vt;this.vt={used:!0,x:0,y:0,w:i.w,h:i.h+e,down:{x:0,y:i.h,w:i.w,h:e,used:!1,right:null,down:null},right:i};let r=this.bt(this.vt,t,e);return r?this.yt(r,t,e):null}},$=class extends H{constructor(t,e,i){super(t),this.skyline=[{x:0,y:0}],this.binWidth=e,this.binHeight=i}pack(t){let e=this.wt,i=this.wt,r=[],s=[...[...t].sort((t,e)=>e.source.width-t.source.width)];for(;s.length>0;){let t=s.shift();if(!t)break;let n=this.Mt(t);if(n)r.push(n);else{s.unshift(t);let r=this.binWidth,n=this.binHeight;if(t.source.width>e||t.source.height>i){console.error(`Item ${t.id} (${t.source.width}x${t.source.height}) is larger than max dimensions (${e}x${i}) and will be skipped.`),s.shift();continue}let o=r,a=n;if(r<=n?o=Math.max(2*r,t.source.width):a=Math.max(2*n,t.source.height),o=Math.min(o,e),a=Math.min(a,i),o<t.source.width&&(o=Math.min(Math.max(2*r,t.source.width),e)),a<t.source.height&&(a=Math.min(Math.max(2*n,t.source.height),i)),o===r&&a===n){console.error(`Bin is at max size (${e}x${i}) but item ${t.id} still won't fit. Skipping this and all remaining items.`);break}this.Et(o,a)}}return{atlas:r.map(t=>n(c({},t),o({normalized:{x:t.x/this.binWidth,y:t.y/this.binHeight,w:t.w/this.binWidth,h:t.h/this.binHeight}}))),size:{w:this.binWidth,h:this.binHeight}}}Et(t,e){!(t<this.binWidth||e<this.binHeight)&&(t>this.binWidth&&(this.skyline[this.skyline.length-1].y>0&&this.skyline.push({x:this.binWidth,y:0}),this.binWidth=t),e>this.binHeight&&(this.binHeight=e))}Mt(t){let e=t.source.width,i=t.source.height;if(0===e||0===i||e>this.binWidth||i>this.binHeight)return null;let r=-1,s=-1,a=0,h=1/0;for(let t=0;t<this.skyline.length;t++){let n=this.skyline[t],o=n.x,l=n.y;if(o+e>this.binWidth)continue;let u=l,c=t+1;for(c=t+1;c<this.skyline.length;c++){let t=this.skyline[c];if(t.x>=o+e)break;t.y>u&&(u=t.y)}(l=u)>=h||l+i>this.binHeight||(h=l,a=o,r=t,s=c)}if(-1===r)return null;let l=[{x:a,y:h+i}],u=this.skyline[s-1].y,d=a+e;(s<this.skyline.length?d<this.skyline[s].x:d<this.binWidth)&&l.push({x:d,y:u});let f=s-r;return this.skyline.splice(r,f,...l),this.$t(),n(c({},t),o({x:a,y:h,w:t.source.width,h:t.source.height}))}$t(){for(let t=0;t<this.skyline.length-1;t++){let e=this.skyline[t],i=this.skyline[t+1];e.y===i.y&&(this.skyline.splice(t+1,1),t--)}}},j={enabled:!0,files:{},add(t,e){this.enabled&&(this.files[t]=e)},get(t){if(this.enabled)return this.files[t]},remove(t){delete this.files[t]},clear(){this.files={}}},Y=class{constructor(){this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}loadAsync(t,e){return new Promise((i,r)=>{this.load(t,i,e,r)})}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}},q=class{constructor(t,e,i){const r=this;let s,n=!1,o=0,a=0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,!1===n&&void 0!==r.onStart&&r.onStart(t,o,a),n=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){let e=h.indexOf(t);return -1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=h.length;e<i;e+=2){let i=h[e],r=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}},K=new WeakMap,J=class extends Y{constructor(){super(...arguments),this.manager=new q,this.options={premultiplyAlpha:"none",colorSpaceConversion:"none"},this.Rt=new AbortController}setOptions(t){return this.options=t,this}load(t,e,i,r){this.manager.onProgress=i,void 0!==this.path&&(t=this.path+t);let s=j.get(`image-bitmap:${t}`);if(void 0!==s)return this.manager.itemStart(t),s.then?void s.then(i=>{if(!0!==K.has(s))return null==e||e(i),this.manager.itemEnd(t),i;null==r||r(K.get(s)),this.manager.itemError(t),this.manager.itemEnd(t)}):(setTimeout(()=>{null==e||e(s),this.manager.itemEnd(t)},0),s);let n=fetch(new Request(t,{headers:new Headers(this.requestHeader),credentials:"anonymous"===this.crossOrigin?"same-origin":"include",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this.Rt.signal]):this.Rt.signal})).then(function(t){return t.blob()}).then(t=>createImageBitmap(t,this.options)).then(i=>(j.add(`image-bitmap:${t}`,i),null==e||e(i),this.manager.itemEnd(t),i)).catch(e=>{null==r||r(e),K.set(n,e),j.remove(`image-bitmap:${t}`),this.manager.itemError(t),this.manager.itemEnd(t)});j.add(`image-bitmap:${t}`,n),this.manager.itemStart(t)}abort(){return this.Rt.abort(),this.Rt=new AbortController,this}},Z=class{constructor(){this.St=new J}loadImagesAsync(t,e){return d(this,null,function*(){try{let i=t.map(t=>d(this,null,function*(){return this.St.loadAsync(t.url,(t,i,r)=>{null==e||e(i/r*100)}).then(e=>({url:t.url,file:e})).catch(t=>{throw t})}));return yield Promise.all(i)}catch(t){throw t}})}},Q=class extends Error{constructor(t,e){super(t),this.response=e}},tt={},te=class extends Y{constructor(){super(...arguments),this.mimeType="",this.responseType="",this.Rt=new AbortController}load(t,e,i,r){let s=!1,n=!1;"string"!=typeof t&&(s=t.url,n=t.sizeInBytes),n||(s=t),void 0!==this.path&&(s=this.path+s);let o=j.get(`file:${s}`);if(void 0!==o)return setTimeout(()=>null==e?void 0:e(o),0),o;if(void 0!==tt[s])return void tt[s].push({onLoad:e,onProgress:i,onError:r});tt[s]=[],tt[s].push({onLoad:e,onProgress:i,onError:r});let a=new Request(s,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this.Rt.signal]):this.Rt.signal});this.mimeType;let h=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(t.status,"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;let e=t.body.getReader(),i=null!=n?n:0;if(!n){let e=t.headers.get("X-File-Size")||t.headers.get("Content-Length");i=e?parseInt(e):0}let r=i>0,o=0;return new Response(new ReadableStream({start(t){!function n(){e.read().then(({done:e,value:a})=>{var h,l;if(e)t.close();else{let e=new ProgressEvent("progress",{lengthComputable:r,loaded:o+=a.byteLength,total:i}),u=tt[s];for(let t=0,i=u.length;t<i;t++)null==(l=(h=u[t]).onProgress)||l.call(h,e);t.enqueue(a),n()}},e=>{t.error(e)})}()}}))}throw new Q(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(t=>{switch(h){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json();default:throw Error(`${h}: no parser.`)}}).then(t=>{var e,i;j.add(`file:${s}`,t);let r=tt[s];delete tt[s];for(let s=0,n=r.length;s<n;s++)null==(i=(e=r[s]).onLoad)||i.call(e,t)}).catch(t=>{var e,i;let r=tt[s];if(void 0===r)throw t;delete tt[s];for(let s=0,n=r.length;s<n;s++)null==(i=(e=r[s]).onError)||i.call(e,t)}).finally(()=>{})}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this.Rt.abort(),this.Rt=new AbortController,this}},ti=class extends Y{constructor(){super(),this.kt=new te,this.options={premultiplyAlpha:"none",colorSpaceConversion:"none"}}abort(){return this}load(t,e,i,r){this.kt.setResponseType("blob"),this.kt.load(t,t=>d(this,null,function*(){try{if(!(t instanceof Blob))throw Error("Expected Blob, but received "+typeof t);{let i=yield createImageBitmap(t,this.options);null==e||e(i)}}catch(t){(r||console.error)(t)}}),i,r)}},tr=class{constructor(){this.St=new ti}loadImagesAsync(t,e){return d(this,null,function*(){try{let i=t.some(t=>t.sizeInBytes),r=new Map,s=new Map,n=i?this.It(t):0,o=0,a=0,h=t.map(t=>d(this,null,function*(){let h=i?{url:t.url,sizeInBytes:t.sizeInBytes}:t.url;return this.St.loadAsync(h,h=>{((t,{loaded:h,total:l})=>{i||s.has(t)||(n+=l,r.set(t,l));let u=s.get(t)||0;o+=h-u,s.set(t,h);let c=Math.round(Math.min(o/n*100,100));c>a&&(a=c,null==e||e(c))})(t.url,h)}).then(e=>({url:t.url,file:e})).catch(e=>{throw n-=t.sizeInBytes||r.get(t.url)||0,e})}));return yield Promise.all(h)}catch(t){throw t}})}It(t){let e=new Set;return t.reduce((t,i)=>{if(!i.sizeInBytes)throw Error(`Layer "${i.url}" is missing the sizeInBytes property.`);return e.has(i.url)?t:(e.add(i.url),t+i.sizeInBytes)},0)}};let ts=(0,i.createContext)(void 0);function tn({children:t}){let s=(0,i.useRef)(null),n=(0,i.useRef)(null),[o,a]=(0,i.useState)(null);return(0,i.useLayoutEffect)(()=>{var t;let e,i,o,h,l,u,c,d,f=s.current,p=n.current;if(!f||!p)return;let g=(i=(e=new O(t={canvas:f,version:"2",attributes:{alpha:!1,depth:!1,stencil:!1,premultipliedAlpha:!1},loader:"advanced"})).gl,o=e.version,h=t.maxTextureSize||i.getParameter(i.MAX_TEXTURE_SIZE),l=t.texturePacker||"binaryTree",u="advanced"===t.loader?new tr:new Z,c=new U({texturePacker:"skyline"===l?new $(h,h,h):new G(h),textureHelper:new W(i,o)}),d="2"===o?new D(i):new B(i),new M({loader:u,glController:e,renderController:new k({context:i,extensions:d,buffersHelper:new N(i),programHelper:new V(i),attributesHelper:new z(i),uniformsHelper:new F(i)}),resourceController:c}));a(g);let m=new(window.ResizeObserver||r.ResizeObserver)(()=>{let{clientWidth:t,clientHeight:e}=p;g.updateResolution(t,e,window.devicePixelRatio||1)});return m.observe(p),()=>{m.disconnect()}},[]),(0,i.useEffect)(()=>{if(!o)return;let t=0,e=()=>{o.render(),t=requestAnimationFrame(e)};return t=requestAnimationFrame(e),()=>cancelAnimationFrame(t)},[o]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{id:"canvas_wrapper",ref:n,className:"fixed flex w-full h-full left-0 top-0 z-[-50]",children:(0,e.jsx)("canvas",{ref:s})}),o&&(0,e.jsx)(ts,{value:{parallaxManager:o},children:t})]})}t.s(["PronotronParallaxManagerProvider",()=>tn,"useParallaxManagerContext",0,()=>{let t=(0,i.useContext)(ts);if(!t)throw Error("useParallaxManagerContext must be used within a PronotronParallaxManagerProvider");return t}],17854)},39108,t=>{"use strict";var e=t.i(43476),i=t.i(71645);let r=(0,i.createContext)(void 0);function s({children:t}){let[s,o]=(0,i.useReducer)(n,[]);return(0,e.jsx)(r,{value:{scenes:s,dispatch:o},children:t})}function n(t,e){switch(e.type){case"add":return[...t,e.payload];case"change":return t.map(t=>t.id===e.payload.id?{...t,...e.payload}:t);case"delete":return t.filter(t=>t.id!==e.payload.id);default:throw Error("Unknown action: "+e.type)}}t.s(["ParallaxDebugProvider",()=>s,"useParallaxDebugProviderContext",0,()=>{let t=(0,i.useContext)(r);if(!t)throw Error("useParallaxDebugProviderContext must be used within a ParallaxDebugContext");return t}])},18566,(t,e,i)=>{e.exports=t.r(76562)},91957,t=>{"use strict";var e=t.i(43476),i=t.i(71645),r=t.i(18566),s=t.i(17255),n=class{constructor(t=20,e=!0){this.t=new Map,this.i=new Map,this.h=0,this.o=0,this.l=0,this.u=0,this._=0,this.p=0,this.v=0,this.m=e,this.N=new s.NativeControlTable(14,e?Uint16Array:Float32Array,t),this.S=new s.IDPool(t)}addNode(t){if(this.t.has(t.ref))return console.warn("Node is already in the list.",t.ref),!1;{let e=this.S.get();this.t.set(t.ref,e),this.i.set(e,t);let i=this.M(t.dispatch.onFastForward);this.N.add(e,{0:e,1:0,2:0,3:0,4:0,11:+!!t.dispatch.onEnter,12:+!!t.dispatch.onExit,5:+!!t.dispatch.onInViewport,6:+!!t.dispatch.onScrollProgress,7:+!!t.dispatch[this.k.P],8:+!!t.dispatch[this.k.A],9:+!!t.dispatch[this.k.F],10:+!!t.dispatch[this.k.I],13:i}),this.S.consume(e);let{nodeStart:r,nodeEnd:s}=this.B(e,t);if(this.p>0){let t=this.L(r,s);this.N.modifyByID(e,{4:t,3:+(2===t)})}return e}}removeNode(t){let e=this.t.get(t);void 0!==e?this.T([e]):console.warn("IONode is not found in the list.",t)}setLastScroll(t){this.h=t,this.O()}updatePositions(t){this.v=t,this.U(),this.i.forEach((t,e)=>this.B(e,t))}updateViewportLayout(t,e){e<=t&&console.warn("Tracking area must be bigger than 0 units"),this.o=t,this.l=e,this.p=e-t,this.O()}L(t,e){return e<this.u?1:t>this._?3:2}T(t){for(let e of t){let t=this.i.get(e);this.t.delete(t.ref),this.i.delete(e),this.N.remove(e),this.S.release(e),t.onRemoveNode&&t.onRemoveNode()}}B(t,e){let{start:i,end:r}=e.getBounds(),s=e.offset||0,n=this.m?Math.round(i-s):i-s,o=this.m?Math.round(r+s):r+s;return this.N.modifyByID(t,{1:n,2:o}),{nodeStart:n,nodeEnd:o}}M(t){switch(t){case"skip_both":default:return 0;case"execute_both":return 1;case"execute_last":return 2}}O(){this.u=this.o+this.h,this._=this.l+this.h}U(){if(this.m&&this.v>65535&&this.N.table.constructor!==Uint32Array){let t=Uint32Array.from(this.N.table);this.N.table=t}}},o=class extends n{constructor(){super(...arguments),this.C={2:{1:(t,e)=>{this.R(t,e,8,this.k.A),this.R(t,e,12,"onExit")},3:(t,e)=>{this.R(t,e,10,this.k.I),this.R(t,e,12,"onExit")}},1:{2:(t,e)=>{this.R(t,e,7,this.k.P),this.R(t,e,11,"onEnter")},3:(t,e)=>{this.V(t,e,7,this.k.P,10,this.k.I)}},3:{2:(t,e)=>{this.R(t,e,9,this.k.F),this.R(t,e,11,"onEnter")},1:(t,e)=>{this.V(t,e,9,this.k.F,8,this.k.A)}}}}handleScroll(t){this.direction=t>this.h?this.q.j:this.q.D,this.setLastScroll(t),this.G()}G(){let{table:t,stride:e,usedSlots:i}=this.N;for(let r=0;r<i;r++){let i=r*e,s=t[i+0],n=t[i+1],o=t[i+2],a=t[i+4],h=this.L(n,o);if(a!==h&&(0!==a&&this.C[a][h](i,s),this.N.modifyByPosition(r,{4:h,3:+(2===h)})),t[i+3]){if(t[i+5]){let t=this.H(n,o,this.h,this.p);this.J(s,t)}if(t[i+6]){let t=this.K(n,o,this.h,this.p);this.W(s,t)}}}}R(t,e,i,r){let s=this.N.table;s[t+i]&&(s[t+i]=this.X(e,r))}V(t,e,i,r,s,n){let o=this.N.table[t+13];if(0!==o)switch(o){case 2:this.R(t,e,s,n);break;case 1:this.R(t,e,i,r),this.R(t,e,s,n)}}H(t,e,i,r){return 2*(e-i)/(r+(e-t))-1}K(t,e,i,r){let s=i+r,n=e-t;return n<=0?+(s>e):Math.max(0,Math.min(1,(s-t)/n))}W(t,e){this.i.get(t).dispatch.onScrollProgress(e)}J(t,e){this.i.get(t).dispatch.onInViewport(e)}X(t,e){let i=this.i.get(t).dispatch[e];return"limit"in i?(i.dispatch(),i.limit-=1,i.limit<1?0:1):(i(),1)}},a=class extends o{constructor(){super(...arguments),this.direction="down",this.q={j:"down",D:"up"},this.k={P:"onTopEnter",A:"onTopExit",F:"onBottomEnter",I:"onBottomExit"}}};t.i(26199);var h=t.i(48568);let l=(0,i.createContext)(null);function u({children:t}){let s=(0,r.usePathname)(),n=(0,i.useMemo)(()=>new a,[]),o=(0,i.useCallback)(()=>window.visualViewport?{height:window.visualViewport.height,offsetTop:window.visualViewport.offsetTop,scale:window.visualViewport.scale}:{height:window.innerHeight,offsetTop:0,scale:1},[]),u=(0,i.useCallback)(t=>{n.updateViewportLayout(t.offsetTop,t.offsetTop+t.height)},[]);return(0,i.useEffect)(()=>{window.scrollTo({top:0}),u(o()),n.setLastScroll(0),n.handleScroll(window.scrollY)},[s]),(0,i.useEffect)(()=>{let t=!1,e=0,{height:i,scale:r}=o(),s=()=>{t=!0},a=()=>{let r=o();i!==r.height&&(i=r.height,u(r),s()),t&&(n.handleScroll(window.scrollY),t=!1),e=requestAnimationFrame(a)};e=requestAnimationFrame(a),window.addEventListener("scroll",s,{passive:!0});let l=new(window.ResizeObserver||h.ResizeObserver)(()=>{u(o()),n.updatePositions(document.documentElement.scrollHeight),s()});return l.observe(document.body),()=>{window.removeEventListener("scroll",s),cancelAnimationFrame(e),l.disconnect()}},[]),(0,e.jsx)(l,{value:{io:n},children:t})}t.s(["PronotronIOProvider",()=>u,"usePronotronIOContext",0,()=>{let t=(0,i.useContext)(l);if(!t)throw Error("usePronotronIOContext must be used within a <PronotronIOProvider>");return t}],91957)}]);