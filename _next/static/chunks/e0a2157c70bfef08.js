(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90696,e=>{"use strict";var t=e.i(43476),n=e.i(71645),a=e.i(55984),s=e.i(67961),l=e.i(17854),i=e.i(91957),r=e.i(39108);function c({loaded:e,sceneID:n}){return(0,t.jsxs)("div",{className:"flex flex-col w-1/2 min-w-[100px] text-white",children:[(0,t.jsxs)("p",{className:"text-lg text-right text-green-500",children:[e,"%"]}),(0,t.jsx)("div",{className:"w-full bg-slate-700 rounded-lg overflow-hidden",children:(0,t.jsx)("div",{className:"block bg-green-500 h-[10px] origin-left",style:{transform:`translate3d( 0, 0, 0 ) scaleX(${e/100})`}})}),(0,t.jsxs)("p",{className:"text-xs text-left mt-spacing-xs",children:["Scene: ",n]})]})}function o({id:e,layers:a,controlType:s="standard",controlRect:o="self",limitControl:u=!0}){let p=(0,n.useRef)(null),{scene:h,sceneRect:g,loaded:f}=function({id:e,layers:t,controlType:a,controlRect:s,limitControl:c,sceneRef:o}){let{dispatch:d}=(0,r.useParallaxDebugProviderContext)(),{parallaxManager:x}=(0,l.useParallaxManagerContext)(),{io:u}=(0,i.usePronotronIOContext)(),[p,h]=(0,n.useState)(),[g,f]=(0,n.useState)(0),[m,y]=(0,n.useState)(null),w=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{w.current||(w.current=!0,(async()=>{try{let n=await x.initScene({id:e,layers:t},e=>{f(Math.round(e))});f(100),setTimeout(()=>{h(n)},50),d({type:"add",payload:{id:n.id,layers:t,controlRect:s,controlType:a,limitControl:c,isActive:!0}})}catch(e){throw e}})())},[]),(0,n.useLayoutEffect)(()=>{let e=o.current;if(!p||!e)return;let t=()=>{let{left:t,right:n,bottom:a,top:l}=e.getBoundingClientRect(),i=n-t,r=a-l,c=window.innerHeight-a;if(s&&"self"!==s)if(s instanceof HTMLElement){let{left:e,right:t,bottom:n,top:a}=s.getBoundingClientRect();y({left:e,top:a,bottom:n,width:t-e,height:n-a})}else y({left:0,top:0,bottom:0,width:window.innerWidth,height:window.innerHeight});else y({left:t,top:l,bottom:a,width:i,height:r});p.setRect({x:t,y:c,w:i,h:r})},n=u.addNode({ref:e,onRemoveNode:()=>{d({type:"delete",payload:{id:p.id}})},dispatch:{onEnter:()=>{p.active=!0,d({type:"change",payload:{id:p.id,isActive:!0}})},onExit:()=>{p.active=!1,d({type:"change",payload:{id:p.id,isActive:!1}})},onInViewport:()=>{t()}},getBounds:()=>{let{top:t,bottom:n}=e.getBoundingClientRect();return{start:t+window.scrollY,end:n+window.scrollY}}});return t(),()=>{!1!==n&&u.removeNode(e),p.active=!1}},[p]),{scene:p,sceneRect:m,loaded:g}}({sceneRef:p,id:e,layers:a,controlType:s,controlRect:o,limitControl:u}),m=(0,n.useMemo)(()=>{if(!h||!g)return null;let e={scene:h,sceneRect:g,sceneRef:p,limitControl:u};return"glide"===s?(0,t.jsx)(x,{...e}):(0,t.jsx)(d,{...e})},[h,g,s,u,p]);return(0,t.jsx)("div",{ref:p,className:"parallaxScene flex w-full h-full items-center justify-center text-center",children:h&&g?m:(0,t.jsx)(c,{loaded:f,sceneID:e})})}function d({scene:e,sceneRect:t,sceneRef:l,limitControl:i}){let{pointerPosition:r}=(0,a.usePointerDataContext)(),{pointerController:c}=(0,s.usePointerContext)(),o=(0,n.useRef)(e.pointer);return(0,n.useEffect)(()=>{if(i&&l.current!==c._test)return;let n=(r.x-t.left)/t.width,a=(r.y-t.top)/t.height;o.current.x+=(n-e.pointer.x)*.1,o.current.y+=(a-e.pointer.y)*.1,o.current.x=Math.min(Math.max(o.current.x,0),1),o.current.y=Math.min(Math.max(o.current.y,0),1)},[t,r]),null}function x({scene:e,sceneRect:t,sceneRef:l,limitControl:i}){let{pointerDeltaAdditive:r,pointerPosition:c}=(0,a.usePointerDataContext)(),{pointerController:o}=(0,s.usePointerContext)();return(0,n.useEffect)(()=>{if(i&&l.current!==o._test)return;let{x:t,y:n}=e.pointer;t+=1e-4*r.x,n+=1e-4*r.y,t=Math.min(Math.max(t,0),1),n=Math.min(Math.max(n,0),1),e.setPointer(t,n)},[t,c]),null}e.s(["ParallaxScene",()=>o],90696)},45085,e=>{"use strict";var t=e.i(43476),n=e.i(90696);let a=[{url:"images/parallax-1.png",sizeInBytes:548864,parallax:{x:.7,y:1},fit:{h:1.1}},{url:"images/parallax-3.png",sizeInBytes:430882,parallax:{x:.8,y:1},fit:{h:1.1}},{url:"images/parallax-motor.png",sizeInBytes:425055,parallax:{x:1,y:1},fit:{h:1.1}}],s=[{url:"images/parallax-1.png",sizeInBytes:548864,parallax:{x:.7,y:1},fit:{h:1.1}},{url:"images/parallax-2.png",sizeInBytes:471647,parallax:{x:.8,y:1},fit:{h:1.1}},{url:"images/parallax-motor.png",sizeInBytes:425055,parallax:{x:1,y:1},fit:{h:1.1}}];function l(){return(0,t.jsxs)("main",{className:"w-full p-spacing-lg space-y-spacing-lg",children:[(0,t.jsxs)("div",{className:"bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl space-y-spacing-xs",children:[(0,t.jsx)("h1",{children:"This is an intersection demo."}),(0,t.jsx)("p",{children:"Parallax scenes can appear anywhere on the screen. Scenes outside the viewport stop rendering automatically. See `Scenes Debug`."}),(0,t.jsxs)("p",{children:["Utilizes ",(0,t.jsx)("a",{className:"text-link",href:"https://www.npmjs.com/package/@pronotron/io",target:"_blank",children:"@pronotron/io"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"w-full landscape:w-2/3 h-150 border relative",children:[(0,t.jsx)("p",{className:"absolute left-0 top-0 p-spacing-xs m-spacing-xs bg-white text-xs rounded-lg",children:"#scene-1"}),(0,t.jsx)(n.ParallaxScene,{layers:a,id:"#scene-1",controlType:"standard",limitControl:!1})]}),(0,t.jsx)("div",{className:"flex items-center justify-center w-1/3 bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl ml-spacing-lg portrait:hidden",children:(0,t.jsx)("h1",{children:"Another space"})})]}),(0,t.jsx)("div",{className:"bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl",children:(0,t.jsx)("h1",{children:"Another space"})}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-1/3 bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl mr-spacing-lg portrait:hidden",children:(0,t.jsx)("h1",{children:"Another space"})}),(0,t.jsxs)("div",{className:"w-full landscape:w-2/3 h-150 border relative",children:[(0,t.jsx)("p",{className:"absolute left-0 top-0 p-spacing-xs m-spacing-xs bg-white text-xs rounded-lg",children:"#scene-2"}),(0,t.jsx)(n.ParallaxScene,{layers:s,id:"#scene-2",controlType:"glide"})]})]})]})}e.s(["default",()=>l])}]);