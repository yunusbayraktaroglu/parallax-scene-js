(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{7977:(e,t,s)=>{Promise.resolve().then(s.bind(s,8532))},8532:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(4568),l=s(9579);let a=[{url:"images/parallax-1.png",sizeInBytes:548864,parallax:{x:.7,y:1},fit:{h:1.1}},{url:"images/parallax-3.png",sizeInBytes:430882,parallax:{x:.8,y:1},fit:{h:1.1}},{url:"images/parallax-motor.png",sizeInBytes:425055,parallax:{x:1,y:1},fit:{h:1.1}}],i=[{url:"images/parallax-1.png",sizeInBytes:548864,parallax:{x:.7,y:1},fit:{h:1.1}},{url:"images/parallax-2.png",sizeInBytes:471647,parallax:{x:.8,y:1},fit:{h:1.1}},{url:"images/parallax-motor.png",sizeInBytes:425055,parallax:{x:1,y:1},fit:{h:1.1}}];function r(){return(0,n.jsxs)("main",{className:"w-full p-spacing-lg space-y-spacing-lg",children:[(0,n.jsxs)("div",{className:"bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl space-y-spacing-xs",children:[(0,n.jsx)("h1",{children:"This is an observing demo"}),(0,n.jsx)("p",{children:"Parallax Scenes can be appear anywhere on the screen. Following parallax-scenes will be stop rendering when they are not visible. See `Scenes Debug`."}),(0,n.jsxs)("p",{children:["Utilizes ",(0,n.jsx)("a",{className:"text-link",href:"https://www.npmjs.com/package/@pronotron/io",target:"_blank",children:"@pronotron/io"})]})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:"w-full landscape:w-2/3 h-150 border relative",children:[(0,n.jsx)("p",{className:"absolute left-0 top-0 p-spacing-xs m-spacing-xs bg-white text-xs rounded-lg",children:"#scene-1"}),(0,n.jsx)(l.C,{layers:a,id:"#scene-1",controlType:"standard",limitControl:!1})]}),(0,n.jsx)("div",{className:"flex items-center justify-center w-1/3 bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl ml-spacing-lg portrait:hidden",children:(0,n.jsx)("h1",{children:"Another space"})})]}),(0,n.jsx)("div",{className:"bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl",children:(0,n.jsx)("h1",{children:"Another space"})}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-1/3 bg-slate-300 p-spacing-lg py-[20vh] rounded-4xl mr-spacing-lg portrait:hidden",children:(0,n.jsx)("h1",{children:"Another space"})}),(0,n.jsxs)("div",{className:"w-full landscape:w-2/3 h-150 border relative",children:[(0,n.jsx)("p",{className:"absolute left-0 top-0 p-spacing-xs m-spacing-xs bg-white text-xs rounded-lg",children:"#scene-2"}),(0,n.jsx)(l.C,{layers:i,id:"#scene-2",controlType:"glide"})]})]})]})}},9579:(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var n=s(4568),l=s(7620),a=s(2288),i=s(3432),r=s(160),c=s(6978),d=s(461);function o(e){let{loaded:t}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-end w-50",children:[(0,n.jsxs)("small",{children:[t,"%"]}),(0,n.jsx)("div",{className:"rounded-lg overflow-hidden bg-slate-700 w-full",children:(0,n.jsx)("div",{className:"block bg-green-500 h-[10px] origin-left",style:{transform:"translate3d( 0, 0, 0 ) scaleX(".concat(t/100,")")}})})]})}function h(e){let{id:t,layers:s,controlType:a="standard",controlRect:i="self",limitControl:h=!0}=e,u=(0,l.useRef)(null),{scene:g,sceneRect:f,loaded:m}=function(e){let{id:t,layers:s,controlType:n,controlRect:a,limitControl:i,sceneRef:o}=e,{dispatch:h}=(0,d.g)(),{parallaxManager:p}=(0,r.h)(),{io:x}=(0,c.u)(),[u,g]=(0,l.useState)(),[f,m]=(0,l.useState)(0),[y,w]=(0,l.useState)({left:0,top:0,bottom:0,width:100,height:100}),j=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{j.current||(j.current=!0,(async()=>{try{let e=await p.initScene({id:t,layers:s},e=>{m(e)});g(e),m(100),h({type:"add",payload:{id:e.id,layers:s,controlRect:a,controlType:n,limitControl:i,isActive:!0}})}catch(e){throw e}})())},[]),(0,l.useLayoutEffect)(()=>{let e=o.current;if(!u||!e)return;let t=()=>{let{left:t,right:s,bottom:n,top:l}=e.getBoundingClientRect(),i=s-t,r=n-l,c=window.innerHeight-n;if(a&&"self"!==a)if(a instanceof HTMLElement){let{left:e,right:t,bottom:s,top:n}=a.getBoundingClientRect();w({left:e,top:n,bottom:s,width:t-e,height:s-n})}else w({left:0,top:0,bottom:0,width:window.innerWidth,height:window.innerHeight});else w({left:t,top:l,bottom:n,width:i,height:r});u.setRect({x:t,y:c,w:i,h:r})},s=x.addNode({ref:e,onRemoveNode:()=>{h({type:"delete",payload:{id:u.id}})},dispatch:{onEnter:()=>{u.active=!0,h({type:"change",payload:{id:u.id,isActive:!0}})},onExit:()=>{u.active=!1,h({type:"change",payload:{id:u.id,isActive:!1}})},onInViewport:()=>{t()}},getBounds:()=>{let{top:t,bottom:s}=e.getBoundingClientRect();return{start:t+window.scrollY,end:s+window.scrollY}}});return t(),()=>{!1!==s&&x.removeNode(e),u.active=!1}},[u]),{scene:u,sceneRect:y,loaded:f}}({sceneRef:u,id:t,layers:s,controlType:a,controlRect:i,limitControl:h});return(0,n.jsx)("div",{ref:u,className:"parallaxScene flex w-full h-full items-center justify-center text-center",children:g?"glide"===a&&(0,n.jsx)(x,{scene:g,sceneRect:f,sceneRef:u,limitControl:h})||"standard"===a&&(0,n.jsx)(p,{scene:g,sceneRect:f,sceneRef:u,limitControl:h}):(0,n.jsxs)("div",{className:"label p-spacing-sm rounded-xl bg-white",children:[(0,n.jsx)(o,{loaded:m}),(0,n.jsxs)("h1",{className:"text-sm",children:["Scene ",t]})]})})}function p(e){let{scene:t,sceneRect:s,sceneRef:n,limitControl:r}=e,{pointerPosition:c}=(0,a.k)(),{pointerController:d}=(0,i.G)(),o=(0,l.useRef)(t.pointer);return(0,l.useEffect)(()=>{if(r&&n.current!==d._test)return;let e=(c.x-s.left)/s.width,l=(c.y-s.top)/s.height;o.current.x+=(e-t.pointer.x)*.1,o.current.y+=(l-t.pointer.y)*.1,o.current.x=Math.min(Math.max(o.current.x,0),1),o.current.y=Math.min(Math.max(o.current.y,0),1),t.setPointer(o.current.x,o.current.y)},[s,c]),null}function x(e){let{scene:t,sceneRect:s,sceneRef:n,limitControl:r}=e,{pointerDeltaAdditive:c,pointerEasedPosition:d}=(0,a.k)(),{pointerController:o}=(0,i.G)();return(0,l.useEffect)(()=>{if(r&&n.current!==o._test)return;let{x:e,y:s}=t.pointer;e+=1e-4*c.x,s+=1e-4*c.y,e=Math.min(Math.max(e,0),1),s=Math.min(Math.max(s,0),1),t.setPointer(e,s)},[s,d]),null}}},e=>{e.O(0,[311,736,587,18,358],()=>e(e.s=7977)),_N_E=e.O()}]);